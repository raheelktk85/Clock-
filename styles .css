<style id="customStyles">
/* ==========================================================================
   PART 2: EXTENSIVE STEAMPUNK CSS
   Inject this block into the <style id="customStyles"> placeholder.
   This stylesheet is intentionally long, richly commented, and feature-packed.
   ========================================================================== */

/* ==========================================================================
   ROOT VARIABLES (COLORS, SHADOWS, SIZING)
   ========================================================================== */
:root{
  --bg-0: #050405;
  --bg-1: #0b0a0a;
  --metal-0: #1f1f1f;
  --metal-1: #3b3226;
  --metal-2: #7b6446;
  --metal-3: #caa77b;
  --accent-amber: #ff8c00;
  --accent-amber-2: #ffc857;
  --accent-yellow: #ffd54a;
  --tube-tint: rgba(10,10,10,0.8);
  --glass-reflect: rgba(255,255,255,0.03);
  --shadow-deep: 0 30px 80px rgba(0,0,0,0.9);
  --nixie-glow: 0 0 6px var(--accent-amber), 0 0 26px rgba(255,140,0,0.35);
  --nixie-glow-2: 0 0 3px rgba(255,193,7,0.25), 0 0 12px rgba(255,193,7,0.14);
  --glass-border: rgba(255,255,255,0.04);
  --panel-bg: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.35));
  --muted: rgba(255,255,255,0.62);
  --muted-2: rgba(255,255,255,0.42);
  --success: #6ee7b7;
  --danger: #ff6b6b;

  --gear-size: 220px;
  --tube-width: 96px;
  --tube-height: 210px;

  --glass-frost: rgba(255,255,255,0.02);
  --border-radius: 14px;
  --transition-fast: 160ms;
  --transition-med: 260ms;
  --transition-slow: 420ms;
}

/* ==========================================================================
   GLOBAL LAYOUT
   ========================================================================== */
* { box-sizing: border-box; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
html,body { height: 100%; margin: 0; padding: 0; background: radial-gradient(circle at center bottom, rgba(255,140,0,0.02), rgba(0,0,0,0.85)), var(--bg-0); font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color: #fff; }

a { color: var(--accent-amber-2); text-decoration: none; }
a:hover { text-decoration: underline; }

/* center the main clock card */
.clock-housing {
  width: 1100px;
  max-width: calc(100% - 40px);
  padding: 32px;
  border-radius: 22px;
  background: linear-gradient(180deg, #171616 0%, #0d0c0c 100%);
  border: 3px solid rgba(255,200,100,0.04);
  box-shadow: var(--shadow-deep);
  position: relative;
  overflow: visible;
  z-index: 30;
  transition: transform var(--transition-med), box-shadow var(--transition-med), filter var(--transition-med);
}

/* small hover lift */
.clock-housing:hover { transform: translateY(-8px); box-shadow: 0 40px 120px rgba(0,0,0,0.95); }

/* Decorative bolts (corners) */
.bolt { position: absolute; width: 14px; height: 14px; background: linear-gradient(180deg, var(--metal-2), var(--metal-1)); border-radius: 3px; border: 1px solid rgba(0,0,0,0.5); box-shadow: inset 0 2px 4px rgba(255,255,255,0.03), 0 6px 18px rgba(0,0,0,0.7); z-index: 60; }
.bolt-tl { top: 14px; left: 14px; transform: rotate(8deg); }
.bolt-tr { top: 14px; right: 14px; transform: rotate(-8deg); }
.bolt-bl { bottom: 14px; left: 14px; transform: rotate(-6deg); }
.bolt-br { bottom: 14px; right: 14px; transform: rotate(6deg); }

/* Gear canvas sits behind everything (fainter) */
#gearCanvas { width: 100%; height: 100%; display: block; filter: blur(0.5px) contrast(0.9) saturate(0.8); }

/* HEADER / TITLE area (keeps text readable) */
#timezoneDisplay { font-size: 1.35rem; font-weight: 700; color: var(--accent-yellow); text-shadow: 0 0 10px rgba(255,200,80,0.14); margin-bottom: 4px; }
#fullTimeDisplay { font-size: 0.95rem; color: var(--muted-2); }

/* ==========================================================================
   Nixie Tubes - container and general styling
   ========================================================================== */
.main-display { display: flex; align-items: center; justify-content: center; gap: 14px; z-index: 40; margin-bottom: 18px; flex-wrap: wrap; }

.nixie-tube {
  width: var(--tube-width);
  height: var(--tube-height);
  background: linear-gradient(180deg, rgba(0,0,0,0.68), rgba(0,0,0,0.82));
  border-radius: 12px;
  border: 2px solid var(--glass-border);
  box-shadow: inset 0 -24px 50px rgba(0,0,0,0.85), 0 18px 50px rgba(0,0,0,0.8);
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  padding-top: 10px;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
}

/* small tube variant for seconds/ampm column */
.short-nixie { width: 120px; height: var(--tube-height); background: transparent; border: none; box-shadow: none; padding: 6px; }

/* glass highlights and grid overlay for each tube */
.nixie-tube::before {
  content: "";
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 55%;
  background: linear-gradient(180deg, rgba(255,255,255,0.05), transparent 20%);
  pointer-events: none;
  transform: skewY(-2deg);
  mix-blend-mode: overlay;
  opacity: 0.9;
}
.nixie-tube::after {
  content: "";
  position: absolute; inset: 0;
  background: repeating-linear-gradient(60deg, rgba(255,140,40,0.01) 0, rgba(255,140,40,0.01) 1px, transparent 1px, transparent 6px),
              repeating-linear-gradient(-60deg, rgba(255,140,40,0.01) 0, rgba(255,140,40,0.01) 1px, transparent 1px, transparent 6px);
  opacity: 0.12;
  pointer-events: none;
}

/* Nixie digit styling */
.time-digit {
  font-weight: 900;
  font-size: 5.2rem;
  color: var(--accent-amber);
  line-height: 0.82;
  text-shadow: var(--nixie-glow);
  transition: transform var(--transition-fast), opacity var(--transition-fast), text-shadow var(--transition-fast);
  transform-origin: center;
  z-index: 120;
  pointer-events: none;
  -webkit-font-smoothing: antialiased;
}

/* smaller date digits (seconds etc) */
.date-digit { font-weight: 800; font-size: 1.65rem; color: var(--accent-yellow); text-shadow: var(--nixie-glow-2); }

/* Interaction hover - tube warms up when hovered */
.nixie-tube:hover { transform: translateY(-6px); box-shadow: 0 28px 66px rgba(0,0,0,0.92), 0 0 60px rgba(255,140,0,0.04); }

/* Flicker animations to simulate real nixie tube behavior */
@keyframes nixieFlicker {
  0% { opacity: 1; filter: brightness(1); }
  2% { opacity: 0.98; filter: brightness(0.98); }
  6% { opacity: 0.92; filter: brightness(0.92); }
  9% { opacity: 0.97; filter: brightness(0.96); }
  14% { opacity: 0.9; filter: brightness(0.9); }
  20% { opacity: 1; filter: brightness(1); }
  100% { opacity: 1; filter: brightness(1); }
}

/* slight randomized flicker on digits */
.time-digit.flicker { animation: nixieFlicker 2.2s infinite; }

/* separator dots */
.separator { width: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 16px; margin: 0 8px; }
.separator .dot { width: 12px; height: 12px; border-radius: 50%; background: var(--accent-amber); box-shadow: var(--nixie-glow); animation: pulseDot 1.4s infinite alternate; }
@keyframes pulseDot { from { transform: scale(1); opacity: 1; } to { transform: scale(.82); opacity: .35; } }

/* base pedestal */
.base-pedestal {
  position: absolute;
  bottom: -18px;
  left: 0; right: 0;
  height: 36px;
  background: radial-gradient(circle at center, #444 0%, #222 50%, #111 100%);
  border-radius: 0 0 18px 18px;
  box-shadow: inset 0 8px 20px rgba(0,0,0,0.8), 0 0 18px rgba(255,140,0,0.06);
  z-index: 18;
}

/* ==========================================================================
   DATE SECTION - small tubes below main display
   ========================================================================== */
.date-section { display: flex; gap: 12px; margin-top: 6px; z-index: 40; align-items: center; justify-content: center; padding: 8px; border-radius: 10px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.18)); border: 1px solid rgba(255,255,255,0.02); }

.date-container { width: 72px; height: 68px; background: linear-gradient(180deg, rgba(0,0,0,0.64), rgba(0,0,0,0.8)); border-radius: 8px; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:8px; box-shadow: inset 0 8px 14px rgba(0,0,0,0.6); border: 1px solid rgba(255,255,255,0.02); }
.date-label { font-size: 0.65rem; color: var(--metal-3); letter-spacing: 1px; text-transform: uppercase; margin-bottom: 4px; }

/* ==========================================================================
   CONTROL PANEL
   ========================================================================== */
.control-panel { width: 100%; max-width: 720px; margin-top: 18px; display: flex; flex-direction: column; gap: 12px; align-items: center; z-index: 40; }

.steampunk-select, .steampunk-button {
  background: linear-gradient(180deg, #6c5b34, #3d2f19);
  color: #fff;
  padding: 10px 14px;
  border-radius: 8px;
  border: 2px solid rgba(0,0,0,0.5);
  box-shadow: inset 0 2px 6px rgba(255,255,255,0.03), 0 8px 30px rgba(0,0,0,0.6);
  font-weight: 700;
  cursor: pointer;
  transition: transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
  min-width: 120px;
}
.steampunk-select { width: 100%; appearance: none; text-align: left; padding-left: 12px; height: 44px; background-image: linear-gradient(180deg, rgba(0,0,0,0.05), transparent); }
.steampunk-button:hover { transform: translateY(-3px); box-shadow: 0 18px 40px rgba(0,0,0,0.6); }

/* fact/dossier/ai display boxes */
.fact-result { display: none; width: 100%; padding: 12px; border-radius: 10px; margin-top: 6px; background: linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.75)); border: 1px solid rgba(255,255,255,0.02); color: var(--muted); }
.fact-result p { margin: 0; }
.fact-result.visible, .fact-result.show { display: block; }

/* loading indicator layout */
#loadingIndicator { display: none; align-items: center; gap: 10px; color: var(--muted-2); margin-top: 10px; }
#loadingIndicator.visible { display: flex; }

/* ==========================================================================
   MODAL: glow customization (overlay + window)
   ========================================================================== */
#glowModal { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.65); z-index: 60; padding: 24px; }
#glowModal > div { width: 420px; background: linear-gradient(180deg, #161616, #0d0d0d); border-radius: 12px; padding: 18px; border: 1px solid rgba(255,200,120,0.06); box-shadow: 0 30px 80px rgba(0,0,0,0.9); }
#glowModal h2 { color: var(--accent-amber); margin-bottom: 6px; }
#glowModal input[type="range"] { width: 100%; }

/* modal buttons */
#glowModal .steampunk-button { width: 100%; margin-top: 8px; }

/* hidden utility class for modal */
.hidden { display: none !important; }

/* ==========================================================================
   AMBIENT AUDIO CONTROL
   ========================================================================== */
audio#ambientSound { display: none; }

/* ==========================================================================
   ANALOG CLOCK (SVG) styling - if present
   ========================================================================== */
.analog-wrap svg { display: block; margin: auto; filter: drop-shadow(0 8px 24px rgba(0,0,0,0.9)); }

/* ==========================================================================
   ADVANCED PANELS: world list, timer, stopwatch, alarms - visual polish
   ========================================================================== */
.panel { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.3)); border-radius: 10px; padding: 12px; border: 1px solid rgba(255,255,255,0.02); box-shadow: 0 12px 30px rgba(0,0,0,0.6); }
.world-list { max-height: 260px; overflow: auto; padding: 6px; display: flex; flex-direction: column; gap: 8px; }
.world-list-item { display:flex; align-items:center; justify-content:space-between; gap: 8px; padding: 8px; background: rgba(255,255,255,0.02); border-radius: 8px; border: 1px solid rgba(255,255,255,0.02); }

/* stopwatch & timer displays */
#stopwatchDisplay, #timerDisplay { font-weight: 900; color: var(--accent-amber); font-size: 1.1rem; letter-spacing: 1px; }
#laps { max-height: 90px; overflow: auto; margin-top: 8px; }

/* alarms list */
#alarmsList > div { padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.03); }

/* ==========================================================================
   STEAM EFFECTS: animated little puffs near base & gears (pure CSS fallback)
   ========================================================================== */
/* we use pseudo elements on the housing for some steam */
.clock-housing::before, .clock-housing::after {
  content: "";
  position: absolute;
  left: 12%;
  bottom: -10%;
  width: 16%;
  height: 30%;
  background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.06), transparent 40%);
  filter: blur(8px);
  opacity: 0.12;
  transform: translateY(10px);
  pointer-events: none;
}
.clock-housing::after {
  left: 72%;
  width: 14%;
  opacity: 0.08;
  transform: translateY(14px);
}

/* small animated steam bubble */
@keyframes steamFloat {
  0% { transform: translateY(10px) scale(0.9); opacity: 0.08; }
  30% { opacity: 0.12; }
  70% { transform: translateY(-28px) scale(1.06); opacity: 0.02; }
  100% { transform: translateY(-48px) scale(1.12); opacity: 0; }
}

/* apply to small steam puffs anchored inside DOM if present (JS may create them) */
.steam-puff { position: absolute; width: 32px; height: 32px; left: 50%; bottom: 20px; background: radial-gradient(circle, rgba(255,255,255,0.08), transparent 40%); border-radius: 50%; animation: steamFloat 3s linear infinite; pointer-events: none; }

/* ==========================================================================
   KEYFRAMES FOR GEAR ROTATION (if CSS-driven)
   ========================================================================== */
@keyframes gearSpinSlow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
@keyframes gearSpinRev { from { transform: rotate(0deg); } to { transform: rotate(-360deg); } }

/* ==========================================================================
   Accessibility and Focus states
   ========================================================================== */
button:focus, select:focus, input:focus, .steampunk-button:focus { outline: 3px solid rgba(255,200,80,0.08); outline-offset: 3px; box-shadow: 0 6px 20px rgba(255,140,0,0.06); }

/* reduced-motion preference support */
@media (prefers-reduced-motion: reduce) {
  .time-digit.flicker, .separator .dot, .steam-puff { animation: none !important; }
  .clock-housing { transition: none !important; transform: none !important; }
}

/* ==========================================================================
   RESPONSIVE ADJUSTMENTS
   ========================================================================== */
@media (max-width: 1100px) {
  .clock-housing { width: calc(100% - 28px); padding: 20px; }
  :root { --tube-width: 84px; --tube-height: 180px; }
  .time-digit { font-size: 4.2rem; }
}
@media (max-width: 720px) {
  .main-display { gap: 8px; }
  :root { --tube-width: 70px; --tube-height: 140px; }
  .time-digit { font-size: 3.4rem; }
  .clock-housing { padding: 14px; border-radius: 12px; }
  #timezoneDisplay { font-size: 1.05rem; }
  .control-panel { max-width: 100%; width: 100%; }
}

/* ==========================================================================
   ALT THEME (inverted / alternate fancy style triggered by class on <html>)
   ========================================================================== */
html.alt-theme .clock-housing {
  background: linear-gradient(180deg, #1a1412 0%, #090707 100%);
  border-color: rgba(200,140,80,0.06);
  filter: hue-rotate(6deg) saturate(1.08);
}
html.alt-theme .time-digit { color: #ffd88a; text-shadow: 0 0 10px rgba(255,200,120,0.18); }
html.alt-theme .steampunk-button { background: linear-gradient(180deg, #42525a, #1c262b); }

/* ==========================================================================
   LONG FORM COMMENT AREA (keeps file verbose and instructive)
   - The CSS above covers:
     * Visuals for tubes & digits
     * Panels, modals, and controls
     * Steam and gear visual placeholders
     * Accessibility & responsive adjustments
   - Next: the JS will implement gear canvas drawing, dynamic steam puffs,
     audio control, API calls, caching, and all interactivity.
   ========================================================================== */

/* ==========================================================================
   EXTRA VISUAL DETAILS: borders, tiny scratches, grain overlay
   ========================================================================== */
/* subtle scratch overlay - long, repeated for texture (keeps file lengthy) */
.texture-layer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image:
    linear-gradient(0deg, rgba(255,255,255,0.002) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.002) 1px, transparent 1px);
  background-size: 8px 8px, 8px 8px;
  opacity: 0.03;
  mix-blend-mode: overlay;
  z-index: 8;
}

/* subtle vignette across the card for depth */
.clock-housing::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  box-shadow: inset 0 80px 140px rgba(0,0,0,0.7), inset 0 -40px 80px rgba(0,0,0,0.6);
  pointer-events: none;
  z-index: 10;
}

/* ==========================================================================
   Fallback for browsers without canvas support:
   - we create a fake gear background using repeating-radial-gradients
   ========================================================================== */
.no-canvas .gear-fallback {
  position: absolute; inset: 0; z-index: 0; opacity: 0.06; pointer-events: none;
  background-image:
    radial-gradient(circle at 20% 30%, rgba(255,200,120,0.06) 0px, transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(255,140,60,0.04) 0px, transparent 30%),
    radial-gradient(circle at 50% 50%, rgba(255,255,255,0.02) 0px, transparent 30%);
  background-size: cover;
}

/* ==========================================================================
   END OF CSS
   - This stylesheet will be referenced by the large JS module which fills
     in dynamic behaviors (gear animation, steam generation, API connectivity).
   ========================================================================== */
</style>